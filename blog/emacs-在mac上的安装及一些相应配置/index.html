<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>emacs 在Mac上的安装及一些相应配置 - 一个人的狂欢</title>
    <meta charset="utf-8" />
    <meta name="author" content="纪秀峰" />
    <meta name="description" content="emacs 在Mac上的安装" />
    <meta name="keywords" content="" />
    <link rel="stylesheet" href="/media/css/main.css" type="text/css">
    <!-- <link rel="stylesheet" href="/media/css/prettify.css" type="text/css"> -->
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-6633117582073327",
        enable_page_level_ads: true
    });
    </script>    
  </head>
  <body class="container">
    <div>
      <header class="masthead">
        <h1 class="masthead-title"><a href="/">一个人的狂欢</a></h1>
        <p></p>
        <ul>
          <li><a href="/blog/">Blog</a></li>
          <li><a href="/tags/">Tags</a></li>
          <li><a href="/about/">About</a></li>
          <li><a href="http://github.com/jixiuf">GitHub</a></li>
          <li><a href="/rss.xml">RSS</a></li>
        </ul>
        <form method="get" id="searchform" action="http://www.google.com/search">
          <input type="text" class="field" name="q" id="s" placeholder="Search">
          <input type="hidden" name="as_sitesearch" value="jixiuf.github.io">
        </form>
      </header>
    </div>

<div>
<div class="post">
<h1>emacs 在Mac上的安装及一些相应配置</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline1">GNU Emacs For Mac OS X&#xa0;&#xa0;&#xa0;<span class="tag"><span class="Emacs">Emacs</span></span></a></li>
<li><a href="#orgheadline4">使用brew 命令安装</a>
<ul>
<li><a href="#orgheadline2">安装 带图形界面的emacs</a></li>
<li><a href="#orgheadline3">安装 不带图形界面的emacs,只能在终端下使用的，</a></li>
</ul>
</li>
<li><a href="#orgheadline8">从源代码编译emacs</a>
<ul>
<li><a href="#orgheadline5">获取emacs 源码</a></li>
<li><a href="#orgheadline6">只编译终端下可用的版本 编译完后 会安装到/usr/local/bin/下</a></li>
<li><a href="#orgheadline7">编译 图形界面的</a></li>
</ul>
</li>
<li><a href="#orgheadline9">mac 启动时自动启动 emacs &#x2013;daemon进程</a></li>
<li><a href="#orgheadline10">~/bin/em emacsclient 封装</a></li>
<li><a href="#orgheadline11">让emacs 支持编辑 plist 文件</a></li>
<li><a href="#orgheadline12">让emacs 支持编辑 applescript 脚本</a></li>
<li><a href="#orgheadline15">emacs 与 iTerm2</a>
<ul>
<li><a href="#orgheadline13">iTerm2 下 的emacs 绑定 C-, C-; Ctrl-return 等按键的问题</a></li>
<li><a href="#orgheadline14">在Finder 中使用iTerm2 中的emacs/emacsclient 打开文件</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1">GNU Emacs For Mac OS X&#xa0;&#xa0;&#xa0;<span class="tag"><span class="Emacs">Emacs</span></span></h2>
<div class="outline-text-2" id="text-orgheadline1">
<p>
<a href="http://emacsformacosx.com/">http://emacsformacosx.com/</a><br  />
  去这里下载 ，下载完  托动到 /Applications/目录就可以了<br  />
</p>
</div>
</div>
<div id="outline-container-orgheadline4" class="outline-2">
<h2 id="orgheadline4">使用brew 命令安装</h2>
<div class="outline-text-2" id="text-orgheadline4">
</div><div id="outline-container-orgheadline2" class="outline-3">
<h3 id="orgheadline2">安装 带图形界面的emacs</h3>
<div class="outline-text-3" id="text-orgheadline2">
<div class="org-src-container">

<pre class="src src-sh">brew install emacs --cocoa
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3">安装 不带图形界面的emacs,只能在终端下使用的，</h3>
<div class="outline-text-3" id="text-orgheadline3">
<p>
mac 自带了emacs22 ，但是版本太老所以需要删掉<br  />
</p>
<div class="org-src-container">

<pre class="src src-sh">sudo rm -f /usr/bin/emacs
sudo rm -f /usr/bin/emacsclient
brew install emacs
</pre>
</div>
<p>
为方便终端下使用 定义些别名<br  />
</p>
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #F8F8F8;">alias</span> <span style="color: #40E0D0;">e</span>=<span style="color: #ffa07a;">'emacs -nw'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline8" class="outline-2">
<h2 id="orgheadline8">从源代码编译emacs</h2>
<div class="outline-text-2" id="text-orgheadline8">
</div><div id="outline-container-orgheadline5" class="outline-3">
<h3 id="orgheadline5">获取emacs 源码</h3>
<div class="outline-text-3" id="text-orgheadline5">
<div class="org-src-container">

<pre class="src src-sh">git clone  git://git.sv.gnu.org/emacs.git
&#25110;&#32773;
git clone  git://git.sv.gnu.org/emacs.git --depth=1
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline6" class="outline-3">
<h3 id="orgheadline6">只编译终端下可用的版本 编译完后 会安装到/usr/local/bin/下</h3>
<div class="outline-text-3" id="text-orgheadline6">
<div class="org-src-container">

<pre class="src src-sh">  <span style="color: #F8F8F8;">cd</span> emacs
  ./configure --without-ns
  <span style="color: #FBDE2D;">or</span>
  ./configure --disable-ns-self-contained
  make
  make install
<span style="color: #AEAEAE;">#</span><span style="color: #AEAEAE;">+BEGIN_QUOTE</span>
    If you pass the --disable-ns-self-contained option to configure, the lisp
    files will be installed under whatever <span style="color: #ffa07a;">'prefix'</span> is set to (defaults to
    /usr/local).  The bundle will be smaller, but depend on these resources (may
    require <span style="color: #ffa07a;">'sudo'</span> for <span style="color: #ffa07a;">"make install"</span>).
<span style="color: #AEAEAE;">#</span><span style="color: #AEAEAE;">+END_QUOTE</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline7" class="outline-3">
<h3 id="orgheadline7">编译 图形界面的</h3>
<div class="outline-text-3" id="text-orgheadline7">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #F8F8F8;">cd</span> emacs
 ./configure
 make
 make install
</pre>
</div>
<p>
编译完之后 会生成nextstep/Emacs.app<br  />
把Emacs.app 移动到/Applications/目录即可<br  />
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline9" class="outline-2">
<h2 id="orgheadline9">mac 启动时自动启动 emacs &#x2013;daemon进程</h2>
<div class="outline-text-2" id="text-orgheadline9">
<p>
~/Library/LaunchAgents/emacs-daemon.plist<br  />
把这个文件放到~/Library/LaunchAgents/目录下 ，重起下电脑，就会启动emacs &#x2013;deamon 进程<br  />
或者执行下<br  />
</p>
<div class="org-src-container">

<pre class="src src-sh">launchctl load ~/Library/LaunchAgents/emacs-daemon.plist
</pre>
</div>
<div class="org-src-container">

<pre class="src src-xml">&lt;?<span style="color: #FBDE2D;">xml</span> <span style="color: #ffa07a;">version=</span><span style="color: #ffa07a;">"1.0"</span><span style="color: #ffa07a;"> encoding=</span><span style="color: #ffa07a;">"UTF-8"</span>?&gt;
&lt;!DOCTYPE plist PUBLIC <span style="color: #ffa07a;">"-//Apple//DTD PLIST 1.0//EN"</span> <span style="color: #ffa07a;">"http://www.apple.com/DTDs/PropertyList-1.0.dtd"</span>&gt;
&lt;<span style="color: #FF6400;">plist</span> <span style="color: #40E0D0;">version</span>=<span style="color: #ffa07a;">"1.0"</span>&gt;
&lt;<span style="color: #FF6400;">dict</span>&gt;
    &lt;<span style="color: #FF6400;">key</span>&gt;EnableGlobbing&lt;/<span style="color: #FF6400;">key</span>&gt;
    &lt;<span style="color: #FF6400;">true</span>/&gt;
    &lt;<span style="color: #FF6400;">key</span>&gt;KeepAlive&lt;/<span style="color: #FF6400;">key</span>&gt;
    &lt;<span style="color: #FF6400;">true</span>/&gt;
    &lt;<span style="color: #FF6400;">key</span>&gt;Label&lt;/<span style="color: #FF6400;">key</span>&gt;
    &lt;<span style="color: #FF6400;">string</span>&gt;emacs-daemon&lt;/<span style="color: #FF6400;">string</span>&gt;
    &lt;<span style="color: #FF6400;">key</span>&gt;ProgramArguments&lt;/<span style="color: #FF6400;">key</span>&gt;
    &lt;<span style="color: #FF6400;">array</span>&gt;
        &lt;<span style="color: #FF6400;">string</span>&gt;/usr/local/bin/emacs&lt;/<span style="color: #FF6400;">string</span>&gt;
        &lt;<span style="color: #FF6400;">string</span>&gt;--daemon&lt;/<span style="color: #FF6400;">string</span>&gt;
    &lt;/<span style="color: #FF6400;">array</span>&gt;
    &lt;<span style="color: #FF6400;">key</span>&gt;RunAtLoad&lt;/<span style="color: #FF6400;">key</span>&gt;
    &lt;<span style="color: #FF6400;">true</span>/&gt;
    &lt;<span style="color: #FF6400;">key</span>&gt;WorkingDirectory&lt;/<span style="color: #FF6400;">key</span>&gt;
    &lt;<span style="color: #FF6400;">string</span>&gt;/Users/&lt;/<span style="color: #FF6400;">string</span>&gt;
&lt;/<span style="color: #FF6400;">dict</span>&gt;
&lt;/<span style="color: #FF6400;">plist</span>&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline10" class="outline-2">
<h2 id="orgheadline10">~/bin/em emacsclient 封装</h2>
<div class="outline-text-2" id="text-orgheadline10">
<p>
写了个脚本命名为  ~/bin/em  封装emacsclient,配合emacs &#x2013;daemon 使用<br  />
</p>
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #AEAEAE;">#</span><span style="color: #AEAEAE;">!/bin/</span><span style="color: #FBDE2D;">sh</span>
<span style="color: #AEAEAE;"># </span><span style="color: #AEAEAE;">use default emacsclient in $PATH</span>
<span style="color: #40E0D0;">EMACSCLIENT</span>=<span style="color: #fa8072;">`command -v emacsclient`</span>
<span style="color: #AEAEAE;"># </span><span style="color: #AEAEAE;">if emacsclient major version ==22</span>
<span style="color: #FBDE2D;">if</span> [ ! -z $<span style="color: #40E0D0;">EMACSCLIENT</span> ] &amp;&amp; [ <span style="color: #fa8072;">`$EMACSCLIENT --version 2&gt;&amp;1| awk -F ' ' '/emacsclient/ {print $2}'|awk -F '.' '{print $1}'`</span> = <span style="color: #ffa07a;">"22"</span> ] ; <span style="color: #FBDE2D;">then</span>
    <span style="color: #40E0D0;">EMACSCLIENT</span>=<span style="color: #ffa07a;">""</span>
<span style="color: #FBDE2D;">fi</span>
<span style="color: #AEAEAE;">#  </span><span style="color: #AEAEAE;">if EMACSCLIENT is empty</span>
<span style="color: #FBDE2D;">if</span> [  -z $<span style="color: #40E0D0;">EMACSCLIENT</span> ] &amp;&amp; [ -x <span style="color: #ffa07a;">"~/bin/emacsclient"</span>  ] &amp;&amp; [ <span style="color: #fa8072;">`~/bin/emacsclient --version 2&gt;&amp;1| awk -F ' ' '/emacsclient/ {print $2}'|awk -F '.' '{print $1}'`</span> != <span style="color: #ffa07a;">"22"</span> ]; <span style="color: #FBDE2D;">then</span>
    <span style="color: #40E0D0;">EMACSCLIENT</span>=<span style="color: #ffa07a;">"~/bin/emacsclient"</span>
<span style="color: #FBDE2D;">fi</span>

<span style="color: #FBDE2D;">if</span> [  -z $<span style="color: #40E0D0;">EMACSCLIENT</span> ] &amp;&amp; [ -x <span style="color: #ffa07a;">"/usr/local/bin/emacsclient"</span>  ] &amp;&amp; [ <span style="color: #fa8072;">`/usr/local/bin/emacsclient --version 2&gt;&amp;1| awk -F ' ' '/emacsclient/ {print $2}'|awk -F '.' '{print $1}'`</span> != <span style="color: #ffa07a;">"22"</span> ]; <span style="color: #FBDE2D;">then</span>
    <span style="color: #40E0D0;">EMACSCLIENT</span>=<span style="color: #ffa07a;">"/usr/local/bin/emacsclient"</span>
<span style="color: #FBDE2D;">fi</span>
<span style="color: #FBDE2D;">if</span> [  -z $<span style="color: #40E0D0;">EMACSCLIENT</span> ] &amp;&amp; [ -x <span style="color: #ffa07a;">"/usr/bin/emacsclient"</span>  ] &amp;&amp; [ <span style="color: #fa8072;">`/usr/bin/emacsclient --version 2&gt;&amp;1| awk -F ' ' '/emacsclient/ {print $2}'|awk -F '.' '{print $1}'`</span> != <span style="color: #ffa07a;">"22"</span> ]; <span style="color: #FBDE2D;">then</span>
    <span style="color: #40E0D0;">EMACSCLIENT</span>=<span style="color: #ffa07a;">"/usr/bin/emacsclient"</span>
<span style="color: #FBDE2D;">fi</span>

<span style="color: #FBDE2D;">if</span> [  -z $<span style="color: #40E0D0;">EMACSCLIENT</span> ] &amp;&amp; [ -x <span style="color: #ffa07a;">"/Applications/Emacs.app/Contents/MacOS/bin/emacsclient"</span>  ]; <span style="color: #FBDE2D;">then</span>
    <span style="color: #40E0D0;">EMACSCLIENT</span>=<span style="color: #ffa07a;">"/Applications/Emacs.app/Contents/MacOS/bin/emacsclient"</span>
<span style="color: #FBDE2D;">fi</span>

<span style="color: #FBDE2D;">if</span> [  -z $<span style="color: #40E0D0;">EMACSCLIENT</span> ] ; <span style="color: #FBDE2D;">then</span>
    <span style="color: #F8F8F8;">echo</span> <span style="color: #ffa07a;">"can not find emacsclient exit"</span>
    <span style="color: #FBDE2D;">exit</span> 1
<span style="color: #FBDE2D;">fi</span>

<span style="color: #FBDE2D;">if</span> [ -z <span style="color: #ffa07a;">"$1"</span> ]
<span style="color: #FBDE2D;">then</span>
    <span style="color: #AEAEAE;">#</span><span style="color: #AEAEAE;">/usr/bin/emacsclient -t  --socket-name=$HOME/.emacs.d/cache/emacs-server-file</span>
    $<span style="color: #40E0D0;">EMACSCLIENT</span> -t  -nw
<span style="color: #FBDE2D;">else</span>
    <span style="color: #AEAEAE;">#</span><span style="color: #AEAEAE;">/usr/bin/emacsclient -t  --socket-name=$HOME/.emacs.d/cache/emacs-server-file "$@"</span>
    $<span style="color: #40E0D0;">EMACSCLIENT</span> -t   -nw <span style="color: #ffa07a;">"$@"</span>
<span style="color: #FBDE2D;">fi</span>
</pre>
</div>
<p>
在 ~/.bashrc 或 ~/.zshrc 中加入以下内容<br  />
</p>
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #FBDE2D;">if</span> [ -f /Applications/Emacs.app/Contents/MacOS/Emacs ]; <span style="color: #FBDE2D;">then</span>
    <span style="color: #F8F8F8;">export</span>  <span style="color: #40E0D0;">ALTERNATE_EDITOR</span>=/Applications/Emacs.app/Contents/MacOS/Emacs
<span style="color: #FBDE2D;">fi</span>
<span style="color: #FBDE2D;">if</span> [ -f /usr/local/bin/emacs ]; <span style="color: #FBDE2D;">then</span>
    <span style="color: #F8F8F8;">export</span>  <span style="color: #40E0D0;">ALTERNATE_EDITOR</span>=/usr/local/bin/emacs
<span style="color: #FBDE2D;">fi</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline11" class="outline-2">
<h2 id="orgheadline11">让emacs 支持编辑 plist 文件</h2>
<div class="outline-text-2" id="text-orgheadline11">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'jka-compr-compression-info-list
             [<span style="color: #ffa07a;">"\\.plist$"</span>
              <span style="color: #ffa07a;">"converting text XML to binary plist"</span>
              <span style="color: #ffa07a;">"plutil"</span>
              (<span style="color: #ffa07a;">"-convert"</span> <span style="color: #ffa07a;">"binary1"</span> <span style="color: #ffa07a;">"-o"</span> <span style="color: #ffa07a;">"-"</span> <span style="color: #ffa07a;">"-"</span>)
              <span style="color: #ffa07a;">"converting binary plist to text XML"</span>
              <span style="color: #ffa07a;">"plutil"</span>
              (<span style="color: #ffa07a;">"-convert"</span> <span style="color: #ffa07a;">"xml1"</span> <span style="color: #ffa07a;">"-o"</span> <span style="color: #ffa07a;">"-"</span> <span style="color: #ffa07a;">"-"</span>)
              <span style="color: #D8FA3C;">nil</span> <span style="color: #D8FA3C;">nil</span> <span style="color: #ffa07a;">"bplist"</span>])
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline12" class="outline-2">
<h2 id="orgheadline12">让emacs 支持编辑 applescript 脚本</h2>
<div class="outline-text-2" id="text-orgheadline12">
<p>
~/.emacs.d/bin/applescript-helper.sh<br  />
</p>
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #AEAEAE;">#</span><span style="color: #AEAEAE;">/bin/sh</span>
<span style="color: #AEAEAE;"># </span><span style="color: #AEAEAE;">mac &#19978; emacs &#30452;&#25509;&#32534;&#36753;&#20108;&#36827;&#21046;applescript</span>
<span style="color: #FBDE2D;">if</span> [ <span style="color: #ffa07a;">"$1"</span> = <span style="color: #ffa07a;">"-d"</span> ]; <span style="color: #FBDE2D;">then</span>
    <span style="color: #40E0D0;">RANDOMFILE</span>=<span style="color: #ffa07a;">"applescript${RANDOM}.scpt"</span>
    cat /dev/stdin &gt;<span style="color: #ffa07a;">"/tmp/$RANDOMFILE"</span>
    osadecompile <span style="color: #ffa07a;">"/tmp/$RANDOMFILE"</span>
    rm <span style="color: #ffa07a;">"/tmp/$RANDOMFILE"</span>
<span style="color: #FBDE2D;">else</span>
    <span style="color: #40E0D0;">RANDOMFILE</span>=<span style="color: #ffa07a;">"applescript${RANDOM}.scpt"</span>
    osacompile -o <span style="color: #ffa07a;">"/tmp/$RANDOMFILE"</span>
    cat <span style="color: #ffa07a;">"/tmp/$RANDOMFILE"</span>
    rm <span style="color: #ffa07a;">"/tmp/$RANDOMFILE"</span>
<span style="color: #FBDE2D;">fi</span>
</pre>
</div>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #AEAEAE;">;; </span><span style="color: #AEAEAE;"># mac &#19978; emacs &#30452;&#25509;&#32534;&#36753;&#20108;&#36827;&#21046;applescript</span>
(add-to-list 'jka-compr-compression-info-list
             `[<span style="color: #ffa07a;">"\\.scpt\\'"</span>
               <span style="color: #ffa07a;">"converting text applescript to binary applescprit "</span> ,(expand-file-name <span style="color: #ffa07a;">"applescript-helper.sh"</span> <span style="color: #ffa07a;">"~/.emacs.d/bin/"</span>) <span style="color: #D8FA3C;">nil</span>
               <span style="color: #ffa07a;">"converting binary applescript to text applescprit "</span> ,(expand-file-name <span style="color: #ffa07a;">"applescript-helper.sh"</span> <span style="color: #ffa07a;">"~/.emacs.d/bin/"</span>) (<span style="color: #ffa07a;">"-d"</span>)
               <span style="color: #D8FA3C;">nil</span> <span style="color: #D8FA3C;">t</span> <span style="color: #ffa07a;">"FasdUAS"</span>])
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline15" class="outline-2">
<h2 id="orgheadline15">emacs 与 iTerm2</h2>
<div class="outline-text-2" id="text-orgheadline15">
</div><div id="outline-container-orgheadline13" class="outline-3">
<h3 id="orgheadline13">iTerm2 下 的emacs 绑定 C-, C-; Ctrl-return 等按键的问题</h3>
<div class="outline-text-3" id="text-orgheadline13">
<p>
我喜欢使用 <a href="https://iterm2.com/">iTerm2</a>这款终端<br  />
但是在终端下的emacs 有些按键是不能按的,比如C-, C-;<br  />
 与<a href="https://iterm2.com/">iTerm2</a> 配合 可以解决这样的问题<br  />
 <a href="http://superuser.com/questions/731427/how-do-i-send-ctrl-in-iterm2">http://superuser.com/questions/731427/how-do-i-send-ctrl-in-iterm2</a><br  />
 <img src="/assets/blog/emacs-在mac上的安装及一些相应配置/iterm-key.png" alt="iterm-key.png" /><br  />
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #FF6400;">global-set-key</span> (kbd <span style="color: #ffa07a;">"C-[ [ a f"</span>) 'backward-kill-word) <span style="color: #AEAEAE;">;</span><span style="color: #AEAEAE;">== "M-[ a f" iterm2 map to ctrl-;</span>

&#20063;&#21487;&#20197;&#23545;&#20854;&#20182;&#38190;&#36827;&#34892;&#32465;&#23450;
(<span style="color: #FF6400;">global-set-key</span> (kbd <span style="color: #ffa07a;">"C-[ [ a a"</span>) 'backward-kill-word) <span style="color: #AEAEAE;">;</span><span style="color: #AEAEAE;">== "M-[ a a" iterm2 map to ctrl-backspace</span>
(<span style="color: #FF6400;">global-set-key</span> (kbd <span style="color: #ffa07a;">"C-[ [ a b"</span>) 'toggle-eshell-cd)   <span style="color: #AEAEAE;">;</span><span style="color: #AEAEAE;">iterm2 map to ctrl-f2</span>
(<span style="color: #FF6400;">global-set-key</span> (kbd <span style="color: #ffa07a;">"C-[ [ a c"</span>) 'hippie-expand)   <span style="color: #AEAEAE;">; </span><span style="color: #AEAEAE;">iterm map to ctrl-return</span>
(<span style="color: #FF6400;">global-set-key</span> (kbd <span style="color: #ffa07a;">"C-[ [ a d"</span>) 'bm-previous)   <span style="color: #AEAEAE;">; </span><span style="color: #AEAEAE;">iterm map to ctrl-,</span>
(<span style="color: #FF6400;">global-set-key</span> (kbd <span style="color: #ffa07a;">"C-[ [ a e"</span>) 'goto-definition)   <span style="color: #AEAEAE;">; </span><span style="color: #AEAEAE;">iterm map to ctrl-.</span>
</pre>
</div>
<p>
这样就实现了iTerm下的emacs 对C-; 进行绑定了<br  />
</p>
</div>
</div>
<div id="outline-container-orgheadline14" class="outline-3">
<h3 id="orgheadline14">在Finder 中使用iTerm2 中的emacs/emacsclient 打开文件</h3>
<div class="outline-text-3" id="text-orgheadline14">
<p>
打开/Applications/Automator.app 文件-&gt;新建-&gt;应用程序<br  />
然后选择 实现工具-&gt;运行applescript 脚本<br  />
右侧会出现 编辑applescript 脚本的内容， 里面输入以下内容<br  />
然后 存储为EmcacClientOpenWith-InIterm2.app<br  />
把这个EmcacClientOpenWith-InIterm2.app 移动到/Applications/目录<br  />
在Finder 中的文件右键  打开方式 选择 /Applications/EmcacClientOpenWith-InIterm2.app<br  />
即可用终端下的emacs/emacsclient 打开此文件<br  />
</p>
<div class="org-src-container">

<pre class="src src-applescript"><span style="color: #AEAEAE;">-- </span><span style="color: #AEAEAE;">-*- coding:utf-8 mode:applescript-*-</span>
<span style="color: #AEAEAE;">-- </span><span style="color: #AEAEAE;">&#25171;&#24320; automator.app &#65292;&#28982;&#21518; &#25991;&#20214;  &#36873;&#25321;&#26412;&#30446;&#24405;&#19979;&#30340;EmcacClientOpenWith-InIterm2.app</span>
<span style="color: #AEAEAE;">-- </span><span style="color: #AEAEAE;">&#26412;&#25991;&#20214;&#21482;&#26159;&#20854;txt &#26684;&#24335;&#30340;&#22791;&#20221;</span>
<span style="color: #AEAEAE;">-- </span><span style="color: #AEAEAE;">http://superuser.com/questions/457484/how-to-open-emacs-from-macs-finder</span>
<span style="color: #AEAEAE;">-- </span><span style="color: #AEAEAE;">https://gist.github.com/ambethia/304964#comment-799519</span>
<span style="color: #AEAEAE;">-- </span><span style="color: #AEAEAE;">http://superuser.com/questions/662815/how-to-exec-command-in-iterm-2-from-applescript</span>
<span style="color: #AEAEAE;">-- </span><span style="color: #AEAEAE;">&#22312;Finder &#20013;&#21491;&#38190;&#20351;&#29992;emacsclient &#25171;&#24320;&#25991;&#20214;</span>
<span style="color: #AEAEAE;">--  </span><span style="color: #AEAEAE;">&#36825;&#20010;&#38656;&#35201;&#29992;automator.app &#23384;&#25104;app  ,&#29992;applescript.app &#23384;&#25104;&#30340;app &#19981;&#34892;</span>

<span style="color: #AEAEAE;">-- </span><span style="color: #AEAEAE;">em is my script wrapper for emacsclient</span>

<span style="color: #AEAEAE;">-- </span><span style="color: #AEAEAE;">#!/bin/sh</span>
<span style="color: #AEAEAE;">-- </span><span style="color: #AEAEAE;">if [ -z "$1" ]</span>
<span style="color: #AEAEAE;">-- </span><span style="color: #AEAEAE;">then</span>
<span style="color: #AEAEAE;">--     </span><span style="color: #AEAEAE;">emacsclient -t</span>
<span style="color: #AEAEAE;">-- </span><span style="color: #AEAEAE;">else</span>
<span style="color: #AEAEAE;">--     </span><span style="color: #AEAEAE;">emacsclient -t   "$@"</span>
<span style="color: #AEAEAE;">-- </span><span style="color: #AEAEAE;">fi</span>


<span style="color: #FBDE2D;">on</span> <span style="color: #FBDE2D;">run</span> {input, parameters}
    <span style="color: #FBDE2D;">tell</span> <span style="color: #FBDE2D;">application</span> <span style="color: #ffa07a;">"iTerm"</span>
        <span style="color: #FBDE2D;">activate</span>
        <span style="color: #FBDE2D;">if</span> (<span style="color: #FBDE2D;">count</span> of terminals) = 0 <span style="color: #FBDE2D;">then</span>
            <span style="color: #FBDE2D;">set</span> t <span style="color: #FBDE2D;">to</span> (make new terminal)
        <span style="color: #FBDE2D;">else</span>
            <span style="color: #FBDE2D;">set</span> t <span style="color: #FBDE2D;">to</span> <span style="color: #FF6400;">current</span> terminal

        <span style="color: #FBDE2D;">end</span> <span style="color: #FBDE2D;">if</span>
        <span style="color: #FBDE2D;">tell</span> t
            <span style="color: #FBDE2D;">set</span> s <span style="color: #FBDE2D;">to</span> (make new session at the <span style="color: #FBDE2D;">end</span> of sessions)
            <span style="color: #FBDE2D;">tell</span> s
                <span style="color: #AEAEAE;">-- </span><span style="color: #AEAEAE;">em &#21629;&#20196;&#26159; &#19978;&#38754;&#27880;&#37322;&#30340;emacsclient &#33050;&#26412;&#65292;</span>
                <span style="color: #AEAEAE;">-- </span><span style="color: #AEAEAE;">exec command (("emacs \"" &amp; POSIX path of first item of input as text) &amp; "\"")</span>
                exec command ((<span style="color: #ffa07a;">"em \"" &amp; POSIX path of first item of input as text) &amp; "</span>\<span style="color: #ffa07a;">""</span>)
            <span style="color: #FBDE2D;">end</span> <span style="color: #FBDE2D;">tell</span>
        <span style="color: #FBDE2D;">end</span> <span style="color: #FBDE2D;">tell</span>
    <span style="color: #FBDE2D;">end</span> <span style="color: #FBDE2D;">tell</span>
<span style="color: #FBDE2D;">end</span> <span style="color: #FBDE2D;">run</span>
</pre>
</div>
<p>
<img src="/assets/blog/emacs-在mac上的安装及一些相应配置/automator1.jpg" alt="automator1.jpg" /><br  />
<img src="/assets/blog/emacs-在mac上的安装及一些相应配置/automator2.jpg" alt="automator2.jpg" /><br  />
</p>
</div>
</div>
</div>

</div>
</div>
    <div>
      <div class="post-meta">
        <span title="post date" class="post-info">2015-10-17</span>
        <span title="last modification date" class="post-info">2016-01-14</span>
        <span title="tags" class="post-info"><a href="/tags/emacs/">Emacs</a>, <a href="/tags/mac/">Mac</a></span>
        <span title="author" class="post-info">纪秀峰</span>
      </div>
      <section>
        <h1>Comments</h1>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          //var disqus_developer = 1;
          var disqus_identifier = "/blog/emacs-在mac上的安装及一些相应配置/";
          var disqus_url = "http://jixiuf.github.io/blog/emacs-在mac上的安装及一些相应配置/";
          var disqus_shortname = 'jixiuf';
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        <div class="ds-thread"></div>
        <script type="text/javascript">
          var duoshuoQuery = {short_name:'jixiuf'};
          (function() {
          var ds = document.createElement('script');
          ds.type = 'text/javascript';ds.async = true;
          ds.src = 'http://static.duoshuo.com/embed.js';
          ds.charset = 'UTF-8';
          (document.getElementsByTagName('head')[0]
          || document.getElementsByTagName('body')[0]).appendChild(ds);
          })();
        </script>
      </section>
      <script src="http://code.jquery.com/jquery-latest.min.js"></script>
      <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.js"></script> -->
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="/media/js/main.js"></script>
      <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 26.x (<a href="http://orgmode.org">Org mode</a> 8.x)</p>
        <p>
          Copyright &copy; 2012 - <span id="footerYear"></span> <a href="mailto:jixiuf &lt;at&gt; gmail &lt;dot&gt; com">纪秀峰</a>
          &nbsp;&nbsp;-&nbsp;&nbsp;
          Powered by <a href="https://github.com/kelvinh/org-page" target="_blank">org-page</a>
          <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
      </div>
    </div>

  </body>
</html>
