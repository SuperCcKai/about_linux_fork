# -*- coding:utf-8 -*-
#+LANGUAGE:  zh
#+TITLE:     fscanf示例
#+AUTHOR:    纪秀峰
#+EMAIL:     jixiuf@gmail.com
#+DATE:     2011-10-25 二
#+DESCRIPTION:fscanf示例
#+KEYWORDS: C fscanf
#+OPTIONS:   H:2 num:nil toc:t \n:t @:t ::t |:t ^:t -:t f:t *:t <:t
#+OPTIONS:   TeX:t LaTeX:t skip:nil d:nil todo:t pri:nil 
#+INFOJS_OPT: view:nil toc:nil ltoc:t mouse:underline buttons:0 path:http://orgmode.org/org-info.js
#+EXPORT_SELECT_TAGS: export
#+EXPORT_EXCLUDE_TAGS: noexport
#+FILETAGS: @C
首先向文件中写入格式化数据,然后再用fscanf读出
#+begin_src c 
#include <stdio.h>

int main( void )
{
  long l;
  float fp;
  char s[81];
  char c;
  FILE *f = fopen("fscanf.out", "w+");

  fprintf( f, "%s %ld %f%c", "a-string", 65000l, 3.14159, 'x' );

  // Set pointer to beginning of file:
  fseek( f, 0L, SEEK_SET );

  // Read data back from file:
  fscanf(f, "%s", s );   // C4996
  fscanf(f, "%ld", &l ); // C4996
  fscanf(f, "%f", &fp ); // C4996
  fscanf(f, "%c", &c );  // C4996

  // Output data read:
  printf( "%s\n", s );
  printf( "%ld\n", l );
  printf( "%f\n", fp );
  printf( "%c\n", c );

  fclose( f );
  return 0;
}

#+end_src
